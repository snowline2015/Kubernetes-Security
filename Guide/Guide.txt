### Install Tetragon
helm repo add cilium https://helm.cilium.io
helm repo update
helm install tetragon cilium/tetragon -n kube-system
kubectl rollout status -n kube-system ds/tetragon -w

# Watch Tetragon logs
kubectl logs -n kube-system -l app.kubernetes.io/name=tetragon -c export-stdout -f | tetra getevents -o compact



# Install CRD
kubectl create -f https://download.elastic.co/downloads/eck/2.7.0/crds.yaml

# Install operators RBAC
kubectl apply -f https://download.elastic.co/downloads/eck/2.7.0/operator.yaml



### Install ElasticSearch
# Get values.yaml
kubectl apply -f elasticsearch.yaml

# Get ElasticSearch password
kubectl get secret elasticsearch-es-elastic-user -o go-template='{{.data.elastic | base64decode}}'



### Install Kibana
kubectl apply -f kibana.yaml



### Install K8s Agent
# Edit k8s-agent.yaml
        hosts:
          - 'http://{SERVICE_IP}:9200'
        username: 'elastic'
        password: '{PASSWORD}'

# Install K8s Agent
kubectl apply -f k8s-agent.yaml

## You can follow the instructions when installing the agent via Kibana

